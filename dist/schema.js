import { createId } from '@paralleldrive/cuid2';
import { relations } from 'drizzle-orm';
import { pgTableCreator, pgEnum, text, varchar, timestamp, index } from 'drizzle-orm/pg-core';

var i=pgTableCreator(e=>`${e}`),c=pgEnum("fakultas",["FITB","FMIPA","FSRD","FTMD","FTTM","FTSL","FTI","SAPPK","SBM","SF","SITH","STEI"]),f=pgEnum("role",["Peserta","Mentor","Mamet"]),I=pgEnum("gender",["male","female"]),x=pgEnum("campus",["Ganesha","Jatinangor","Cirebon"]),r=i("user",{id:text("id").primaryKey().$defaultFn(createId),nim:varchar("nim",{length:100}).unique().notNull(),role:f("role").notNull(),password:varchar("password",{length:255}).notNull(),createdAt:timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull().defaultNow()},e=>({idIdx:index().on(e.id),nimIdx:index().on(e.nim)})),d=i("profile",{id:text("id").primaryKey().$defaultFn(createId),name:varchar("name",{length:255}).notNull(),userId:text("userId").notNull().references(()=>r.id),faculty:c("faculty").notNull(),gender:I("gender").notNull(),campus:x("campus").notNull(),updatedAt:timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),profileImage:text("profileImage")},e=>({userIdIdx:index().on(e.userId)})),A=relations(r,({many:e,one:m})=>({profile:m(d)})),S=relations(d,({one:e})=>({users:e(r,{fields:[d.userId],references:[r.id]})}));

export { x as campusEnum, i as createTable, c as facultyEnum, I as genderEnum, d as profiles, S as profilesRelations, f as roleEnum, r as users, A as usersRelations };
