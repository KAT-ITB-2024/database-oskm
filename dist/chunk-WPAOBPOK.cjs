'use strict';

var cuid2 = require('@paralleldrive/cuid2');
var drizzleOrm = require('drizzle-orm');
var pgCore = require('drizzle-orm/pg-core');

var z=Object.defineProperty;var R=(e,o)=>{for(var T in o)z(e,T,{get:o[T],enumerable:!0});};var L={};R(L,{assignmentSubmissions:()=>h,assignmentSubmissionsRelations:()=>B,assignmentTypeEnum:()=>M,assignments:()=>f,campusEnum:()=>P,characters:()=>v,createTable:()=>i,eventAssignments:()=>y,eventAssignmentsRelations:()=>k,eventDayEnum:()=>F,eventPresences:()=>N,eventPresencesRelations:()=>Y,events:()=>a,eventsCharacterRelations:()=>G,eventsRelations:()=>J,facultyEnum:()=>E,genderEnum:()=>D,lembagaEnum:()=>_,messages:()=>m,messagesRelations:()=>H,presenceEventEnum:()=>U,presenceTypeEnum:()=>b,profiles:()=>x,profilesRelations:()=>O,roleEnum:()=>$,userMatches:()=>d,userMatchesRelations:()=>V,users:()=>t,usersRelations:()=>q});var i=pgCore.pgTableCreator(e=>`${e}`),E=pgCore.pgEnum("faculty",["FITB","FMIPA","FSRD","FTMD","FTTM","FTSL","FTI","SAPPK","SBM","SF","SITH","STEI"]),_=pgCore.pgEnum("lembaga",["HMJ","Unit"]),$=pgCore.pgEnum("role",["Peserta","Mentor","Mamet"]),D=pgCore.pgEnum("gender",["male","female"]),P=pgCore.pgEnum("campus",["Ganesha","Jatinangor","Cirebon"]),M=pgCore.pgEnum("assignmentType",["Daily","Side"]),b=pgCore.pgEnum("presenceType",["Hadir","Izin/Sakit","Alpha"]),F=pgCore.pgEnum("day",["Day 1","Day 2","Day 3","Day 4"]),U=pgCore.pgEnum("presenceEvent",["Opening","Closing"]),t=i("users",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),nim:pgCore.varchar("nim",{length:100}).unique().notNull(),role:$("role").notNull(),password:pgCore.varchar("password",{length:255}).notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({idIdx:pgCore.index().on(e.id),nimIdx:pgCore.index().on(e.nim)})),q=drizzleOrm.relations(t,({many:e,one:o})=>({profile:o(x),userMatchesAsFirstUser:e(d),userMatchesAsSecondUser:e(d),messages:e(m)})),x=i("profiles",{name:pgCore.varchar("name",{length:255}).notNull(),userId:pgCore.text("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),faculty:E("faculty").notNull(),gender:D("gender").notNull(),campus:P("campus").notNull(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),profileImage:pgCore.text("profileImage"),groupNumber:pgCore.integer("groupNumber").notNull(),point:pgCore.integer("point").notNull().$default(()=>0)},e=>({userIdIdx:pgCore.index().on(e.userId),pointIdx:pgCore.index().on(e.point)})),O=drizzleOrm.relations(x,({one:e})=>({users:e(t,{fields:[x.userId],references:[t.id]})})),d=i("userMatches",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),firstUserId:pgCore.text("firstUserId").notNull().references(()=>t.id,{onDelete:"cascade"}),secondUserId:pgCore.text("secondUserId").notNull().references(()=>t.id,{onDelete:"cascade"}),topic:pgCore.varchar("topic",{length:50}).notNull(),isRevealed:pgCore.boolean("isRevealed").notNull().default(drizzleOrm.sql`false`),isAnonymous:pgCore.boolean("isAnonymous").notNull().default(drizzleOrm.sql`false`),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),endedAt:pgCore.timestamp("endedAt",{mode:"date",withTimezone:!0}).default(drizzleOrm.sql`null`).$type()}),V=drizzleOrm.relations(d,({many:e,one:o})=>({firstUser:o(t,{fields:[d.firstUserId],references:[t.id]}),secondUser:o(t,{fields:[d.secondUserId],references:[t.id]}),messages:e(m)})),m=i("messages",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),senderId:pgCore.text("senderId").notNull().references(()=>t.id),receiverId:pgCore.text("receiverId").notNull().references(()=>t.id),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),userMatchId:pgCore.text("userMatchId").notNull().references(()=>d.id,{onDelete:"cascade"})}),H=drizzleOrm.relations(m,({many:e,one:o})=>({senderId:o(t,{fields:[m.senderId],references:[t.id]}),receiverId:o(t,{fields:[m.receiverId],references:[t.id]}),userMatch:o(d,{fields:[m.userMatchId],references:[d.id]})})),f=i("assignments",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),title:pgCore.varchar("title",{length:255}).notNull(),description:pgCore.text("description").notNull(),startTime:pgCore.timestamp("startTime",{mode:"date",withTimezone:!0}),deadline:pgCore.timestamp("deadline",{mode:"date",withTimezone:!0}).notNull(),files:pgCore.varchar("files",{length:255}).array().default(drizzleOrm.sql`ARRAY[]::varchar[]`),assignmentType:M("assignmentType").notNull(),point:pgCore.integer("point"),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()}),h=i("assignmentSubmissions",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),assignmentId:pgCore.text("assignmentId").notNull().references(()=>f.id,{onDelete:"cascade"}),userNim:pgCore.varchar("userNim",{length:100}).notNull().references(()=>t.nim,{onDelete:"cascade",onUpdate:"cascade"}),files:pgCore.varchar("files",{length:255}).array().default(drizzleOrm.sql`ARRAY[]::varchar[]`),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({userIdIdx:pgCore.index("submission_userId_idx").on(e.userNim)})),B=drizzleOrm.relations(h,({one:e})=>({assignment:e(f,{fields:[h.assignmentId],references:[f.id]}),user:e(t,{fields:[h.userNim],references:[t.nim]})})),v=i("characters",{name:pgCore.varchar("name",{length:255}).notNull().primaryKey(),characterImage:pgCore.varchar("characterImage",{length:255}).notNull()}),a=i("events",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),day:F("day").notNull(),eventDate:pgCore.date("eventDate",{mode:"date"}).notNull(),openingOpenPresenceTime:pgCore.time("openingOpenPresenceTime").notNull(),openingClosePresenceTime:pgCore.time("openingClosePresenceTime").notNull(),closingOpenPresenceTime:pgCore.time("closingOpenPresenceTime").notNull(),closingClosePresenceTime:pgCore.time("closingClosePresenceTime").notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull(),lore:pgCore.text("lore").notNull(),characterName:pgCore.varchar("characterName",{length:255}).notNull().references(()=>v.name)},e=>({uniqueDayConstraint:pgCore.unique().on(e.day)})),G=drizzleOrm.relations(a,({one:e})=>({character:e(v,{fields:[a.characterName],references:[v.name]})})),J=drizzleOrm.relations(a,({many:e})=>({eventPresences:e(N),eventAssignments:e(y)})),N=i("eventPresences",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),eventId:pgCore.text("eventId").notNull().references(()=>a.id),userNim:pgCore.varchar("userNim",{length:255}).notNull().references(()=>t.nim),presenceType:b("presenceType").notNull(),presenceEvent:U("presenceEvent").notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull(),profileImage:pgCore.text("profileImage")},e=>({eventIdIdx:pgCore.index("presence_eventId_idx").on(e.eventId),userIdIdx:pgCore.index("presence_userId_idx").on(e.userNim),uniquePresenceConstraint:pgCore.unique().on(e.eventId,e.presenceEvent,e.userNim)})),Y=drizzleOrm.relations(N,({one:e})=>({event:e(a,{fields:[N.eventId],references:[a.id]}),user:e(t,{fields:[N.userNim],references:[t.nim]})})),y=i("eventAssignments",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),eventId:pgCore.text("eventId").notNull().references(()=>a.id,{onDelete:"cascade"}),assignmentId:pgCore.text("assignmentId").notNull().references(()=>f.id,{onDelete:"cascade"})}),k=drizzleOrm.relations(y,({one:e})=>({event:e(a,{fields:[y.eventId],references:[a.id]}),assignment:e(f,{fields:[y.assignmentId],references:[f.id]})}));

exports.A = Y;
exports.B = y;
exports.C = k;
exports.D = L;
exports.a = i;
exports.b = E;
exports.c = _;
exports.d = $;
exports.e = D;
exports.f = P;
exports.g = M;
exports.h = b;
exports.i = F;
exports.j = U;
exports.k = t;
exports.l = q;
exports.m = x;
exports.n = O;
exports.o = d;
exports.p = V;
exports.q = m;
exports.r = H;
exports.s = f;
exports.t = h;
exports.u = B;
exports.v = v;
exports.w = a;
exports.x = G;
exports.y = J;
exports.z = N;
