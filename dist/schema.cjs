'use strict';

var cuid2 = require('@paralleldrive/cuid2');
var drizzleOrm = require('drizzle-orm');
var pgCore = require('drizzle-orm/pg-core');

var o=pgCore.pgTableCreator(e=>`${e}`),U=pgCore.pgEnum("faculty",["FITB","FMIPA","FSRD","FTMD","FTTM","FTSL","FTI","SAPPK","SBM","SF","SITH","STEI"]),C=pgCore.pgEnum("lembaga",["BSO","UKM","HMPS","Pusat","Eksternal"]),K=pgCore.pgEnum("role",["Peserta","Mentor","Mamet","ITB-X"]),V=pgCore.pgEnum("gender",["Male","Female"]),B=pgCore.pgEnum("assignmentType",["Main","Side"]),q=pgCore.pgEnum("presenceType",["Hadir","Izin/Sakit","Alpha"]),O=pgCore.pgEnum("day",["Day 1","Day 2","Day 3","Day 4"]),L=pgCore.pgEnum("presenceEvent",["Opening","Closing"]),Y=pgCore.pgEnum("classDay",["Day 1","Day 2"]),_=pgCore.pgEnum("status",["Taken","Not Taken"]),G=pgCore.pgEnum("class",["Sesi 1","Sesi 2"]),H=pgCore.pgEnum("MBTI",["Mova","Kovva","Ozirron","Sylas","Odra"]),n=o("users",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),nim:pgCore.varchar("nim",{length:100}).unique().notNull(),role:K("role").notNull(),email:pgCore.varchar("email",{length:255}).unique(),password:pgCore.varchar("password",{length:255}).notNull(),activityPoints:pgCore.integer("activityPoints").default(0),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({idIdx:pgCore.index().on(e.id),nimIdx:pgCore.index().on(e.nim)})),j=drizzleOrm.relations(n,({many:e,one:i})=>({profile:i(x),userMatchesAsFirstUser:e(p,{relationName:"firstUser"}),userMatchesAsSecondUser:e(p,{relationName:"secondUser"}),messages:e(f,{relationName:"sender"}),messagesAsReceiver:e(f,{relationName:"receiver"}),resetToken:i(E),chosenClass:i(P),wrappedProfile:i(D)})),A=o("groups",{name:pgCore.text("groupName").notNull().primaryKey(),point:pgCore.integer("point").notNull().default(0),bata:pgCore.text("bata").notNull()}),J=drizzleOrm.relations(A,({many:e,one:i})=>({mentors:e(n),students:e(n)})),x=o("profiles",{userId:pgCore.text("userId").notNull().primaryKey().references(()=>n.id,{onDelete:"cascade"}),name:pgCore.varchar("name",{length:255}).notNull(),faculty:U("faculty").notNull(),gender:V("gender").notNull(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull(),profileImage:pgCore.text("profileImage"),point:pgCore.integer("point"),instagram:pgCore.varchar("instagram",{length:255}),bio:pgCore.varchar("bio",{length:255}),chosenClass:pgCore.varchar("chosenClass",{length:255}).references(()=>P.id),group:pgCore.text("group").notNull().references(()=>A.name),lastMBTI:H("lastMBTI"),coins:pgCore.integer("coins").default(0)},e=>({userIdIdx:pgCore.index().on(e.userId),groupIdx:pgCore.index().on(e.group),pointIdx:pgCore.index().on(e.point)})),Z=drizzleOrm.relations(x,({one:e})=>({users:e(n,{fields:[x.userId],references:[n.id]}),group:e(A,{fields:[x.group],references:[A.name]})})),E=o("resetTokens",{userId:pgCore.text("id").primaryKey().references(()=>n.id),value:pgCore.text("value"),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),expiredTime:pgCore.integer("expiredTime").default(3600)}),ee=drizzleOrm.relations(E,({one:e})=>({userId:e(n,{fields:[E.userId],references:[n.id]})})),p=o("userMatches",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),firstUserId:pgCore.text("firstUserId").notNull().references(()=>n.id,{onDelete:"cascade"}),secondUserId:pgCore.text("secondUserId").notNull().references(()=>n.id,{onDelete:"cascade"}),topic:pgCore.varchar("topic",{length:50}).notNull(),isRevealed:pgCore.boolean("isRevealed").notNull().default(drizzleOrm.sql`false`),isAnonymous:pgCore.boolean("isAnonymous").notNull().default(drizzleOrm.sql`false`),lastMessage:pgCore.text("lastMessage"),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),endedAt:pgCore.timestamp("endedAt",{mode:"date",withTimezone:!0}).default(drizzleOrm.sql`null`).$type()}),te=drizzleOrm.relations(p,({many:e,one:i})=>({firstUser:i(n,{fields:[p.firstUserId],references:[n.id],relationName:"firstUser"}),secondUser:i(n,{fields:[p.secondUserId],references:[n.id],relationName:"secondUser"}),messages:e(f)})),f=o("messages",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),senderId:pgCore.text("senderId").notNull().references(()=>n.id),receiverId:pgCore.text("receiverId").notNull().references(()=>n.id),content:pgCore.text("content").notNull(),isRead:pgCore.boolean("isRead").notNull().default(drizzleOrm.sql`false`),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),userMatchId:pgCore.text("userMatchId").notNull().references(()=>p.id,{onDelete:"cascade"})}),ne=drizzleOrm.relations(f,({many:e,one:i})=>({senderId:i(n,{fields:[f.senderId],references:[n.id],relationName:"sender"}),receiverId:i(n,{fields:[f.receiverId],references:[n.id],relationName:"receiver"}),userMatch:i(p,{fields:[f.userMatchId],references:[p.id]})})),S=o("assignments",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),title:pgCore.varchar("title",{length:255}).notNull(),description:pgCore.text("description").notNull(),startTime:pgCore.timestamp("startTime",{mode:"date",withTimezone:!0}).notNull(),filename:pgCore.text("filename").notNull(),downloadUrl:pgCore.text("downloadUrl").notNull(),deadline:pgCore.timestamp("deadline",{mode:"date",withTimezone:!0}).notNull(),assignmentType:B("assignmentType").notNull(),point:pgCore.integer("point").notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()}),w=o("assignmentSubmissions",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),point:pgCore.integer("point").default(0),assignmentId:pgCore.text("assignmentId").notNull().references(()=>S.id,{onDelete:"cascade"}),userNim:pgCore.varchar("userNim",{length:100}).notNull().references(()=>n.nim,{onDelete:"cascade",onUpdate:"cascade"}),filename:pgCore.text("filename").notNull(),downloadUrl:pgCore.text("downloadUrl").notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({userIdIdx:pgCore.index("submission_userId_idx").on(e.userNim)})),re=drizzleOrm.relations(w,({one:e})=>({assignment:e(S,{fields:[w.assignmentId],references:[S.id]}),user:e(n,{fields:[w.userNim],references:[n.nim]})})),b=o("characters",{name:pgCore.varchar("name",{length:255}).notNull().primaryKey(),characterImage:pgCore.varchar("characterImage",{length:255}).notNull()}),m=o("events",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),day:O("day").notNull(),eventDate:pgCore.date("eventDate",{mode:"date"}).notNull(),openingOpenPresenceTime:pgCore.time("openingOpenPresenceTime").notNull(),openingClosePresenceTime:pgCore.time("openingClosePresenceTime").notNull(),closingOpenPresenceTime:pgCore.time("closingOpenPresenceTime").notNull(),closingClosePresenceTime:pgCore.time("closingClosePresenceTime").notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull(),lore:pgCore.text("lore").notNull(),characterName:pgCore.varchar("characterName",{length:255}).notNull().references(()=>b.name),guideBook:pgCore.varchar("guideBook",{length:255}).notNull(),youtubeVideo:pgCore.varchar("youtubeVideo",{length:255}).notNull()},e=>({uniqueDayConstraint:pgCore.unique().on(e.day)})),se=drizzleOrm.relations(m,({one:e})=>({characters:e(b,{fields:[m.characterName],references:[b.name]})})),oe=drizzleOrm.relations(m,({many:e})=>({eventPresences:e(I)})),I=o("eventPresence",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),eventId:pgCore.text("eventId").notNull().references(()=>m.id),userNim:pgCore.varchar("userNim",{length:255}).notNull().references(()=>n.nim),presenceType:q("presenceType").notNull(),presenceEvent:L("presenceEvent").notNull(),remarks:pgCore.text("remarks"),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({eventIdIdx:pgCore.index("presence_eventId_idx").on(e.eventId),userIdIdx:pgCore.index("presence_userId_idx").on(e.userNim),uniquePresenceConstraint:pgCore.unique().on(e.eventId,e.presenceEvent,e.userNim)})),ae=drizzleOrm.relations(I,({one:e})=>({event:e(m,{fields:[I.eventId],references:[m.id]}),user:e(n,{fields:[I.userNim],references:[n.nim]})})),P=o("classes",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),title:pgCore.varchar("title",{length:255}).notNull(),topic:pgCore.varchar("topic",{length:100}),description:pgCore.text("description").notNull(),speaker:pgCore.varchar("speaker",{length:100}).notNull(),location:pgCore.varchar("location",{length:100}).notNull(),date:pgCore.timestamp("date",{mode:"date",withTimezone:!0}).notNull(),totalSeats:pgCore.integer("totalSeats").notNull(),reservedSeats:pgCore.integer("reservedSeats").default(0),type:G("classSession").notNull()}),le=drizzleOrm.relations(P,({many:e})=>({users:e(n)})),$=o("postTests",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),startTime:pgCore.timestamp("startTime",{mode:"date",withTimezone:!0}),deadline:pgCore.timestamp("deadline",{mode:"date",withTimezone:!0}).notNull(),googleFormLink:pgCore.varchar("googleFormLink",{length:255}).notNull(),eventId:pgCore.text("eventId").notNull().references(()=>m.id)}),ie=drizzleOrm.relations($,({one:e})=>({event:e(m,{fields:[$.eventId],references:[m.id]})})),de=o("notifications",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),content:pgCore.text("content").notNull(),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow()}),D=o("wrappedProfiles",{userId:pgCore.text("userId").notNull().references(()=>n.id,{onDelete:"cascade"}).primaryKey(),name:pgCore.text("name").notNull(),totalMatch:pgCore.integer("totalMatch").notNull().default(0),submittedQuest:pgCore.integer("submittedQuest").notNull().default(0),character:pgCore.text("character"),personality:pgCore.text("personality"),personalityDesc:pgCore.text("personalityDesc"),favTopics:pgCore.text("favTopics").array().default(drizzleOrm.sql`ARRAY[]::text[]`),favTopicCount:pgCore.integer("favTopicCount").notNull().default(0),rank:pgCore.integer("rank").notNull(),rankPercentage:pgCore.numeric("rankPercentage").notNull(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({userIdIdx:pgCore.index().on(e.userId)})),ue=drizzleOrm.relations(D,({one:e})=>({users:e(n,{fields:[D.userId],references:[n.id]})})),ce=o("lembagaProfiles",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),lembaga:C("lembaga").notNull(),detailedCategory:pgCore.varchar("detailedCategory",{length:255}),name:pgCore.varchar("name",{length:255}).notNull(),logo:pgCore.text("logo"),description:pgCore.text("description"),instagram:pgCore.varchar("instagram",{length:255}),visitorCount:pgCore.integer("visitorCount").default(0),userId:pgCore.text("userId").notNull().references(()=>n.id,{onDelete:"cascade"}),currentToken:pgCore.text("currentToken"),detailLink:pgCore.text("detailLink"),currentExpiry:pgCore.timestamp("currentExpirty",{mode:"date",withTimezone:!0}),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({lembagaIdIdx:pgCore.index().on(e.id),lembagaEnum:pgCore.index().on(e.name)})),v=o("merchandises",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),name:pgCore.varchar("name",{length:255}).notNull(),price:pgCore.integer("price").notNull(),stock:pgCore.integer("stock").notNull(),image:pgCore.text("image"),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()},e=>({merchandiseIdIdx:pgCore.index().on(e.id)})),me=drizzleOrm.relations(v,({many:e})=>({merchandiseExchangeDetails:e(N)})),pe=o("boothClaims",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),userId:pgCore.text("userId").notNull().references(()=>n.id,{onDelete:"cascade"}),boothId:pgCore.text("boothId").notNull().references(()=>n.id,{onDelete:"cascade"}),isGranted:pgCore.boolean("isGranted").default(!1),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()}),h=o("merchandiseExchanges",{id:pgCore.text("id").primaryKey().$defaultFn(cuid2.createId),userId:pgCore.text("userId").notNull().references(()=>n.id,{onDelete:"cascade"}),status:_("status").notNull(),totalItem:pgCore.integer("totalItem").notNull().default(0),totalCoins:pgCore.integer("totalCoins").notNull().default(0),createdAt:pgCore.timestamp("createdAt",{mode:"date",withTimezone:!0}).notNull().defaultNow(),updatedAt:pgCore.timestamp("updatedAt",{mode:"date",withTimezone:!0}).notNull()}),fe=drizzleOrm.relations(h,({one:e,many:i})=>({user:e(n,{fields:[h.userId],references:[n.id]}),merchandiseExchangeDetails:i(N)})),N=o("merchandiseExchangeDetails",{merchandiseExchangeId:pgCore.text("merchandiseExchangeId").notNull().references(()=>h.id,{onDelete:"cascade"}),merchandiseId:pgCore.text("merchandiseId").notNull().references(()=>v.id),quantity:pgCore.integer("quantity").notNull()},e=>({pk:pgCore.primaryKey({columns:[e.merchandiseExchangeId,e.merchandiseId]})})),ye=drizzleOrm.relations(N,({one:e})=>({merchandiseExchange:e(h,{fields:[N.merchandiseExchangeId],references:[h.id]}),merchandise:e(v,{fields:[N.merchandiseId],references:[v.id]})}));

exports.MBTIEnum = H;
exports.assignmentSubmissions = w;
exports.assignmentSubmissionsRelations = re;
exports.assignmentTypeEnum = B;
exports.assignments = S;
exports.characters = b;
exports.classDayEnum = Y;
exports.classSessionEnum = G;
exports.classUserRelations = le;
exports.classes = P;
exports.createTable = o;
exports.eventDayEnum = O;
exports.eventPresences = I;
exports.eventPresencesRelations = ae;
exports.events = m;
exports.eventsCharactersRelations = se;
exports.eventsRelations = oe;
exports.facultyEnum = U;
exports.genderEnum = V;
exports.groupRelations = J;
exports.groups = A;
exports.lembagaEnum = C;
exports.lembagaProfiles = ce;
exports.merchandiseExchangeDetails = N;
exports.merchandiseExchangeDetailsRelations = ye;
exports.merchandiseExchangeRelations = fe;
exports.merchandiseExchangeStatusEnum = _;
exports.merchandiseExchanges = h;
exports.merchandiseRelations = me;
exports.merchandises = v;
exports.messages = f;
exports.messagesRelations = ne;
exports.notifications = de;
exports.postTestRelations = ie;
exports.postTests = $;
exports.presenceEventEnum = L;
exports.presenceTypeEnum = q;
exports.profiles = x;
exports.profilesRelations = Z;
exports.resetTokenRelations = ee;
exports.resetTokens = E;
exports.roleEnum = K;
exports.userMatches = p;
exports.userMatchesRelations = te;
exports.users = n;
exports.usersRelations = j;
exports.visitors = pe;
exports.wrappedProfiles = D;
exports.wrappedProfilesRelation = ue;
